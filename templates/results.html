<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BlockCarbon Results</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/style.css') }}"
    />
  </head>

  <body>
    <header id="header">
      <div class="left-header">
        <div class="logo-container">
          <img
            src="{{ url_for('static', filename='images/BlockCarbon.png') }}"
            alt="BlockCarbon Logo"
            id="logo"
          />
        </div>
        <h1>
          <a href="{{ url_for('index') }}" class="header-link">BlockCarbon</a>
        </h1>
      </div>
      <div class="developer-attribution">
        <span>Developed by Students at UMB</span>
      </div>
    </header>

    <hr class="header-line" />

    <main>
      <h2>Analysis Results</h2>

      {% for result in results %}
      <section class="polygon-result">
        <h3>Polygon {{ loop.index }}</h3>

        <div class="images-container">
          <div class="image-box">
            <h4>Satellite Image</h4>
            <img src="{{ result.image_url }}" alt="Satellite Image" />
          </div>
          <div class="image-box">
            <h4>Land Cover Classification</h4>
            <img
              src="{{ result.landcover_image_url }}"
              alt="Land Cover Classification"
            />
          </div>
        </div>

        <div class="results-data">
          <h4>Land Cover Distribution</h4>
          <table>
            <thead>
              <tr>
                <th>Land Cover Type</th>
                <th>Area (hectares)</th>
              </tr>
            </thead>
            <tbody>
              {% for class_name, area in result.areas.items() %}
              <tr>
                <td>{{ class_name }}</td>
                <td>{{ "%.2f"|format(area) }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <h4>Carbon Stock Analysis</h4>
          <table>
            <tr>
              <td>Current Carbon Stocks:</td>
              <td>{{ "%.2f"|format(result.current_carbon_stocks) }} tC</td>
            </tr>
            <tr>
              <td>Potential Carbon Stocks after Reforestation:</td>
              <td>{{ "%.2f"|format(result.reforested_carbon_stocks) }} tC</td>
            </tr>
            <tr>
              <td>Carbon Stock Additionality:</td>
              <td>{{ "%.2f"|format(result.additionality) }} tC</td>
            </tr>
            <tr>
              <td>Potential Carbon Credits:</td>
              <td>{{ "%.2f"|format(result.carbon_credits) }} credits</td>
            </tr>
          </table>
        </div>
      </section>

      {% if not loop.last %}
      <hr class="section-divider" />
      {% endif %} {% endfor %}

      <div class="actions">
        <a href="{{ url_for('index') }}" class="button">Analyze Another Area</a>
      </div>
    </main>
  </body>
</html>
